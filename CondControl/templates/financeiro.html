<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <title>Gerenciamento Financeiro</title>
    <style>
        body {
            padding: 20px;
            background-color: #f4f4f4;
        }
    </style>
</head>
<body>

    <button id="toggle-navbar" class="btn btn-info mb-3">Mostrar/Ocultar Navbar</button>

    <nav id="navbar-condcontrol" class="navbar navbar-expand-lg navbar-light bg-light" style="display: none;">
        <a class="navbar-brand" href="http://127.0.0.1:5000/index">CondControl</a>
        <div class="collapse navbar-collapse">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="/reservas">Reservas</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/financeiro">Financeiro</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/comunicados">Comunicados</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/ocorrencias">Ocorrências</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/visitantes">Visitantes</a>
                </li>
            </ul>
        </div>
    </nav>

    <header class="mb-4">
        <h1 class="text-center">Gerenciamento Financeiro do Condomínio</h1>
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <a class="navbar-brand" href="http://127.0.0.1:5000">CondControl</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="/dashboard">Dashboard</a>
                    </li>
        
                </ul>
            </div>
        </nav>
    </header>

    <main>
        <section class="mb-5">
            <h2>Registro de Receitas</h2>
            <form id="form-receita" class="bg-white p-4 rounded shadow-sm">
                <div class="form-group">
                    <label for="descricao-receita">Descrição:</label>
                    <input type="text" class="form-control" id="descricao-receita" required>
                </div>
                <div class="form-group">
                    <label for="valor-receita">Valor:</label>
                    <input type="number" class="form-control" id="valor-receita" required>
                </div>
                <div class="form-group">
                    <label for="data-receita">Data:</label>
                    <input type="date" class="form-control" id="data-receita" required>
                </div>
                <div class="form-group">
                    <label for="categoria-receita">Categoria:</label>
                    <select class="form-control" id="categoria-receita">
                        <option value="taxa">Taxa de Condomínio</option>
                        <option value="aluguel">Aluguel de Espaço</option>
                        <option value="outra">Outra</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary">Adicionar Receita</button>
                <a href="/ver-receitas" class="btn btn-secondary ml-2">Ver Receitas</a>
            </form>
        </section>

        <section class="mb-5">
            <h2>Registro de Despesas</h2>
            <form id="form-despesa" class="bg-white p-4 rounded shadow-sm">
                <div class="form-group">
                    <label for="descricao-despesa">Descrição:</label>
                    <input type="text" class="form-control" id="descricao-despesa" required>
                </div>
                <div class="form-group">
                    <label for="valor-despesa">Valor:</label>
                    <input type="number" class="form-control" id="valor-despesa" required>
                </div>
                <div class="form-group">
                    <label for="data-despesa">Data:</label>
                    <input type="date" class="form-control" id="data-despesa" required>
                </div>
                <div class="form-group">
                    <label for="categoria-despesa">Categoria:</label>
                    <select class="form-control" id="categoria-despesa">
                        <option value="manutencao">Manutenção</option>
                        <option value="salario">Salários</option>
                        <option value="contas">Contas de Serviços</option>
                        <option value="outra">Outra</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-danger">Adicionar Despesa</button>
                <a href="/ver-despesas" class="btn btn-secondary ml-2">Ver Despesas</a>
            </form>
        </section>
        <section class="mb-5">
            <h2>Registro de Manutenções</h2>
            <form id="form-manutencao" class="bg-white p-4 rounded shadow-sm mb-4" method="POST" action="/manutencao">
                <div class="form-group">
                    <label for="descricao-manutencao">Descrição da Manutenção:</label>
                    <input type="text" class="form-control" id="descricao-manutencao" name="descricao" required>
                </div>
                <div class="form-group">
                    <label for="data-manutencao">Data:</label>
                    <input type="date" class="form-control" id="data-manutencao" name="data" required>
                </div>
                <div class="form-group">
                    <label for="custo-manutencao">Custo:</label>
                    <input type="number" class="form-control" id="custo-manutencao" name="custo" required>
                </div>
                <button type="submit" class="btn btn-primary">Adicionar Manutenção</button>
                <a href="/ver-registros" class="btn btn-secondary ml-2">Ver Registros</a>

            </form>
        
        </section>
        
     
    </main>

    <footer class="text-center mt-4">
        <p>&copy; 2024 CondControl - Todos os direitos reservados.</p>
    </footer>
    
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        // Função para adicionar receita
        document.getElementById('form-receita').addEventListener('submit', function(event) {
            event.preventDefault(); // Evita o envio padrão do formulário

            const descricao = document.getElementById('descricao-receita').value;
            const valor = document.getElementById('valor-receita').value;
            const data = document.getElementById('data-receita').value;
            const categoria = document.getElementById('categoria-receita').value;

            fetch('/api/receitas', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ descricao, valor, data, categoria }),
            })
            .then(response => response.json())
            .then(data => {
                alert('Receita adicionada com sucesso!');
                // Limpar o formulário ou atualizar a UI
                document.getElementById('form-receita').reset();
            })
            .catch((error) => {
                console.error('Erro:', error);
                alert('Erro ao adicionar receita.');
            });
        });

        // Função para adicionar despesa
        document.getElementById('form-despesa').addEventListener('submit', function(event) {
            event.preventDefault(); // Evita o envio padrão do formulário

            const descricao = document.getElementById('descricao-despesa').value;
            const valor = document.getElementById('valor-despesa').value;
            const data = document.getElementById('data-despesa').value;
            const categoria = document.getElementById('categoria-despesa').value;

            fetch('/api/despesas', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ descricao, valor, data, categoria }),
            })
            .then(response => response.json())
            .then(data => {
                alert('Despesa adicionada com sucesso!');
                // Limpar o formulário ou atualizar a UI
                document.getElementById('form-despesa').reset();
            })
            .catch((error) => {
                console.error('Erro:', error);
                alert('Erro ao adicionar despesa.');
            });
        });

        // Função para mostrar ou ocultar a navbar
        document.getElementById('toggle-navbar').addEventListener('click', function() {
            const navbar = document.getElementById('navbar-condcontrol');
            if (navbar.style.display === "none") {
                navbar.style.display = "block";
            } else {
                navbar.style.display = "none";
            }
        });

    </script>
</body>
</html>
